!function(t,n){var e=function(t,n){var e=t.left,r=t.top,o=t.right,i=t.bottom,u=n.left,f=n.top,c=n.right,g=n.bottom;return e<c&&o>u&&r<g&&i>f},r=function(n,r,o,i){var u=t.map(n,function(t){return{element:t,boundingBox:t.getBoundingClientRect(),distance:Number.MAX_VALUE}}),f=t.map(t(r),o),c=t.grep(u,function(n){return t.each(f,function(t,r){e(n.boundingBox,r)&&(n.distance=Math.min(n.distance,i(n.boundingBox,r)))}),n.distance!==Number.MAX_VALUE}),g=c.sort(function(t,n){return t.distance-n.distance});return t(t.map(g,function(t){return t.element}))};t.fn.leftOf=function(t){return r(this,t,function(t){var n=t.getBoundingClientRect();return{left:Number.MIN_VALUE,top:n.top,right:n.left,bottom:n.bottom}},function(t,n){return Math.max(0,n.right-t.right)})},t.fn.above=function(t){return r(this,t,function(t){var n=t.getBoundingClientRect();return{left:n.left,top:Number.MIN_VALUE,right:n.right,bottom:n.top}},function(t,n){return Math.max(0,n.bottom-t.bottom)})},t.fn.rightOf=function(t){return r(this,t,function(t){var n=t.getBoundingClientRect();return{left:n.right,top:n.top,right:Number.MAX_VALUE,bottom:n.bottom}},function(t,n){return Math.max(0,t.left-n.left)})},t.fn.below=function(t){return r(this,t,function(t){var n=t.getBoundingClientRect();return{left:n.left,top:n.bottom,right:n.right,bottom:Number.MAX_VALUE}},function(t,n){return Math.max(0,t.top-n.top)})},t.fn.overlaps=function(t){return r(this,t,function(t){return t.getBoundingClientRect()},function(t,n){return 0})},t.fn.boundingBoxes=function(e){e=e||"PAGE";var r=(outerWidth-innerWidth)/2,o=outerHeight-innerHeight-r,i=n.screenX+r,u=n.screenY+o,f={PAGE:function(t){return t},SCREEN:function(n){return t.extend({},n,{left:n.left+i,bottom:n.bottom+u,right:n.right+i,top:n.top+u})}};return t(this).map(function(){return console.debug(screenX,screenY),(f[e]||function(t){return t})(this.getBoundingClientRect())}).toArray()}}(jQuery,window);
