function diff_match_patch(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Diff_DualThreshold=32,this.Match_Balance=.5,this.Match_Threshold=.5,this.Match_MinLength=100,this.Match_MaxLength=1e3,this.Patch_Margin=4,this.Match_MaxBits=function(){for(var t=0,e=1,r=2;e!=r;)t++,e=r,r<<=1;return t}()}function patch_obj(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}(function(){window.jQuerySG=jQuery.noConflict(!0)}).call(this);var DIFF_DELETE=-1,DIFF_INSERT=1,DIFF_EQUAL=0;diff_match_patch.prototype.diff_main=function(t,e,r){if(t==e)return[[DIFF_EQUAL,t]];void 0===r&&(r=!0);var s=r,n=this.diff_commonPrefix(t,e),i=t.substring(0,n);t=t.substring(n),e=e.substring(n),n=this.diff_commonSuffix(t,e);var o=t.substring(t.length-n);t=t.substring(0,t.length-n),e=e.substring(0,e.length-n);var a=this.diff_compute(t,e,s);return i&&a.unshift([DIFF_EQUAL,i]),o&&a.push([DIFF_EQUAL,o]),this.diff_cleanupMerge(a),a},diff_match_patch.prototype.diff_compute=function(t,e,r){var s;if(!t)return[[DIFF_INSERT,e]];if(!e)return[[DIFF_DELETE,t]];var n=t.length>e.length?t:e,i=t.length>e.length?e:t,o=n.indexOf(i);if(o!=-1)return s=[[DIFF_INSERT,n.substring(0,o)],[DIFF_EQUAL,i],[DIFF_INSERT,n.substring(o+i.length)]],t.length>e.length&&(s[0][0]=s[2][0]=DIFF_DELETE),s;n=i=null;var a=this.diff_halfMatch(t,e);if(a){var h=a[0],l=a[1],d=a[2],c=a[3],g=a[4],f=this.diff_main(h,d,r),u=this.diff_main(l,c,r);return f.concat([[DIFF_EQUAL,g]],u)}r&&(t.length<100||e.length<100)&&(r=!1);var p;if(r){var _=this.diff_linesToChars(t,e);t=_[0],e=_[1],p=_[2]}if(s=this.diff_map(t,e),s||(s=[[DIFF_DELETE,t],[DIFF_INSERT,e]]),r){this.diff_charsToLines(s,p),this.diff_cleanupSemantic(s),s.push([DIFF_EQUAL,""]);for(var m=0,b=0,y=0,v="",F="";m<s.length;){switch(s[m][0]){case DIFF_INSERT:y++,F+=s[m][1];break;case DIFF_DELETE:b++,v+=s[m][1];break;case DIFF_EQUAL:if(b>=1&&y>=1){var _=this.diff_main(v,F,!1);s.splice(m-b-y,b+y),m=m-b-y;for(var E=_.length-1;E>=0;E--)s.splice(m,0,_[E]);m+=_.length}y=0,b=0,v="",F=""}m++}s.pop()}return s},diff_match_patch.prototype.diff_linesToChars=function(t,e){function r(t){for(var e="",r=0,i=-1,o=s.length;i<t.length-1;){i=t.indexOf("\n",r),i==-1&&(i=t.length-1);var a=t.substring(r,i+1);r=i+1,(n.hasOwnProperty?n.hasOwnProperty(a):n[a]!==undefined)?e+=String.fromCharCode(n[a]):(e+=String.fromCharCode(o),n[a]=o,s[o++]=a)}return e}var s=[],n={};return s[0]="",[r(t),r(e),s]},diff_match_patch.prototype.diff_charsToLines=function(t,e){for(var r=0;r<t.length;r++){for(var s=t[r][1],n=[],i=0;i<s.length;i++)n[i]=e[s.charCodeAt(i)];t[r][1]=n.join("")}},diff_match_patch.prototype.diff_map=function(t,e){var r=(new Date).getTime()+1e3*this.Diff_Timeout,s=t.length+e.length-1,n=2*this.Diff_DualThreshold<s,i=[],o=[],a={},h={};a[1]=0,h[1]=0;for(var l,d,c,g={},f=!1,u=!!g.hasOwnProperty,p=(t.length+e.length)%2,_=0;_<s;_++){if(this.Diff_Timeout>0&&(new Date).getTime()>r)return null;i[_]={};for(var m=-_;m<=_;m+=2){for(l=m==-_||m!=_&&a[m-1]<a[m+1]?a[m+1]:a[m-1]+1,d=l-m,n&&(c=l+","+d,p&&(u?g.hasOwnProperty(c):g[c]!==undefined)&&(f=!0),p||(g[c]=_));!f&&l<t.length&&d<e.length&&t.charAt(l)==e.charAt(d);)l++,d++,n&&(c=l+","+d,p&&(u?g.hasOwnProperty(c):g[c]!==undefined)&&(f=!0),p||(g[c]=_));if(a[m]=l,i[_][l+","+d]=!0,l==t.length&&d==e.length)return this.diff_path1(i,t,e);if(f){o=o.slice(0,g[c]+1);var b=this.diff_path1(i,t.substring(0,l),e.substring(0,d));return b.concat(this.diff_path2(o,t.substring(l),e.substring(d)))}}if(n){o[_]={};for(var m=-_;m<=_;m+=2){for(l=m==-_||m!=_&&h[m-1]<h[m+1]?h[m+1]:h[m-1]+1,d=l-m,c=t.length-l+","+(e.length-d),!p&&(u?g.hasOwnProperty(c):g[c]!==undefined)&&(f=!0),p&&(g[c]=_);!f&&l<t.length&&d<e.length&&t.charAt(t.length-l-1)==e.charAt(e.length-d-1);)l++,d++,c=t.length-l+","+(e.length-d),!p&&(u?g.hasOwnProperty(c):g[c]!==undefined)&&(f=!0),p&&(g[c]=_);if(h[m]=l,o[_][l+","+d]=!0,f){i=i.slice(0,g[c]+1);var b=this.diff_path1(i,t.substring(0,t.length-l),e.substring(0,e.length-d));return b.concat(this.diff_path2(o,t.substring(t.length-l),e.substring(e.length-d)))}}}}return null},diff_match_patch.prototype.diff_path1=function(t,e,r){for(var s=[],n=e.length,i=r.length,o=null,a=t.length-2;a>=0;a--)for(;;){if(t[a].hasOwnProperty?t[a].hasOwnProperty(n-1+","+i):t[a][n-1+","+i]!==undefined){n--,o===DIFF_DELETE?s[0][1]=e.charAt(n)+s[0][1]:s.unshift([DIFF_DELETE,e.charAt(n)]),o=DIFF_DELETE;break}if(t[a].hasOwnProperty?t[a].hasOwnProperty(n+","+(i-1)):t[a][n+","+(i-1)]!==undefined){i--,o===DIFF_INSERT?s[0][1]=r.charAt(i)+s[0][1]:s.unshift([DIFF_INSERT,r.charAt(i)]),o=DIFF_INSERT;break}n--,i--,o===DIFF_EQUAL?s[0][1]=e.charAt(n)+s[0][1]:s.unshift([DIFF_EQUAL,e.charAt(n)]),o=DIFF_EQUAL}return s},diff_match_patch.prototype.diff_path2=function(t,e,r){for(var s=[],n=0,i=e.length,o=r.length,a=null,h=t.length-2;h>=0;h--)for(;;){if(t[h].hasOwnProperty?t[h].hasOwnProperty(i-1+","+o):t[h][i-1+","+o]!==undefined){i--,a===DIFF_DELETE?s[n-1][1]+=e.charAt(e.length-i-1):s[n++]=[DIFF_DELETE,e.charAt(e.length-i-1)],a=DIFF_DELETE;break}if(t[h].hasOwnProperty?t[h].hasOwnProperty(i+","+(o-1)):t[h][i+","+(o-1)]!==undefined){o--,a===DIFF_INSERT?s[n-1][1]+=r.charAt(r.length-o-1):s[n++]=[DIFF_INSERT,r.charAt(r.length-o-1)],a=DIFF_INSERT;break}i--,o--,a===DIFF_EQUAL?s[n-1][1]+=e.charAt(e.length-i-1):s[n++]=[DIFF_EQUAL,e.charAt(e.length-i-1)],a=DIFF_EQUAL}return s},diff_match_patch.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charCodeAt(0)!==e.charCodeAt(0))return 0;for(var r=0,s=Math.min(t.length,e.length),n=s,i=0;r<n;)t.substring(i,n)==e.substring(i,n)?(r=n,i=r):s=n,n=Math.floor((s-r)/2+r);return n},diff_match_patch.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charCodeAt(t.length-1)!==e.charCodeAt(e.length-1))return 0;for(var r=0,s=Math.min(t.length,e.length),n=s,i=0;r<n;)t.substring(t.length-n,t.length-i)==e.substring(e.length-n,e.length-i)?(r=n,i=r):s=n,n=Math.floor((s-r)/2+r);return n},diff_match_patch.prototype.diff_halfMatch=function(t,e){function r(t,e,r){for(var s,n,i,a,h=t.substring(r,r+Math.floor(t.length/4)),l=-1,d="";(l=e.indexOf(h,l+1))!=-1;){var c=o.diff_commonPrefix(t.substring(r),e.substring(l)),g=o.diff_commonSuffix(t.substring(0,r),e.substring(0,l));d.length<g+c&&(d=e.substring(l-g,l)+e.substring(l,l+c),s=t.substring(0,r-g),n=t.substring(r+c),i=e.substring(0,l-g),a=e.substring(l+c))}return d.length>=t.length/2?[s,n,i,a,d]:null}var s=t.length>e.length?t:e,n=t.length>e.length?e:t;if(s.length<10||n.length<1)return null;var i,o=this,a=r(s,n,Math.ceil(s.length/4)),h=r(s,n,Math.ceil(s.length/2));if(!a&&!h)return null;i=h?a&&a[4].length>h[4].length?a:h:a;var l,d,c,g;return t.length>e.length?(l=i[0],d=i[1],c=i[2],g=i[3]):(c=i[0],g=i[1],l=i[2],d=i[3]),[l,d,c,g,i[4]]},diff_match_patch.prototype.diff_cleanupSemantic=function(t){for(var e=!1,r=[],s=0,n=null,i=0,o=0,a=0;i<t.length;)t[i][0]==DIFF_EQUAL?(r[s++]=i,o=a,a=0,n=t[i][1]):(a+=t[i][1].length,null!==n&&n.length<=o&&n.length<=a&&(t.splice(r[s-1],0,[DIFF_DELETE,n]),t[r[s-1]+1][0]=DIFF_INSERT,s--,s--,i=s>0?r[s-1]:-1,o=0,a=0,n=null,e=!0)),i++;e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t)},diff_match_patch.prototype.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 5;var a=0;return(t.charAt(t.length-1).match(r)||e.charAt(0).match(r))&&(a++,(t.charAt(t.length-1).match(s)||e.charAt(0).match(s))&&(a++,(t.charAt(t.length-1).match(n)||e.charAt(0).match(n))&&(a++,(t.match(i)||e.match(o))&&a++))),a}for(var r=/[^a-zA-Z0-9]/,s=/\s/,n=/[\r\n]/,i=/\n\r?\n$/,o=/^\r?\n\r?\n/,a=1;a<t.length-1;){if(t[a-1][0]==DIFF_EQUAL&&t[a+1][0]==DIFF_EQUAL){var h=t[a-1][1],l=t[a][1],d=t[a+1][1],c=this.diff_commonSuffix(h,l);if(c){var g=l.substring(l.length-c);h=h.substring(0,h.length-c),l=g+l.substring(0,l.length-c),d=g+d}for(var f=h,u=l,p=d,_=e(h,l)+e(l,d);l.charAt(0)===d.charAt(0);){h+=l.charAt(0),l=l.substring(1)+d.charAt(0),d=d.substring(1);var m=e(h,l)+e(l,d);m>=_&&(_=m,f=h,u=l,p=d)}t[a-1][1]!=f&&(f?t[a-1][1]=f:(t.splice(a-1,1),a--),t[a][1]=u,p?t[a+1][1]=p:(t.splice(a+1,1),a--))}a++}},diff_match_patch.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,r=[],s=0,n="",i=0,o=!1,a=!1,h=!1,l=!1;i<t.length;)t[i][0]==DIFF_EQUAL?(t[i][1].length<this.Diff_EditCost&&(h||l)?(r[s++]=i,o=h,a=l,n=t[i][1]):(s=0,n=""),h=l=!1):(t[i][0]==DIFF_DELETE?l=!0:h=!0,n&&(o&&a&&h&&l||n.length<this.Diff_EditCost/2&&o+a+h+l==3)&&(t.splice(r[s-1],0,[DIFF_DELETE,n]),t[r[s-1]+1][0]=DIFF_INSERT,s--,n="",o&&a?(h=l=!0,s=0):(s--,i=s>0?r[s-1]:-1,h=l=!1),e=!0)),i++;e&&this.diff_cleanupMerge(t)},diff_match_patch.prototype.diff_cleanupMerge=function(t){t.push([DIFF_EQUAL,""]);for(var e,r=0,s=0,n=0,i="",o="";r<t.length;)switch(t[r][0]){case DIFF_INSERT:n++,o+=t[r][1],r++;break;case DIFF_DELETE:s++,i+=t[r][1],r++;break;case DIFF_EQUAL:0!==s||0!==n?(0!==s&&0!==n&&(e=this.diff_commonPrefix(o,i),0!==e&&(r-s-n>0&&t[r-s-n-1][0]==DIFF_EQUAL?t[r-s-n-1][1]+=o.substring(0,e):(t.splice(0,0,[DIFF_EQUAL,o.substring(0,e)]),r++),o=o.substring(e),i=i.substring(e)),0!==(e=this.diff_commonSuffix(o,i))&&(t[r][1]=o.substring(o.length-e)+t[r][1],o=o.substring(0,o.length-e),i=i.substring(0,i.length-e))),0===s?t.splice(r-s-n,s+n,[DIFF_INSERT,o]):0===n?t.splice(r-s-n,s+n,[DIFF_DELETE,i]):t.splice(r-s-n,s+n,[DIFF_DELETE,i],[DIFF_INSERT,o]),r=r-s-n+(s?1:0)+(n?1:0)+1):0!==r&&t[r-1][0]==DIFF_EQUAL?(t[r-1][1]+=t[r][1],t.splice(r,1)):r++,n=0,s=0,i="",o=""}""===t[t.length-1][1]&&t.pop();var a=!1;for(r=1;r<t.length-1;)t[r-1][0]==DIFF_EQUAL&&t[r+1][0]==DIFF_EQUAL&&(t[r][1].substring(t[r][1].length-t[r-1][1].length)==t[r-1][1]?(t[r][1]=t[r-1][1]+t[r][1].substring(0,t[r][1].length-t[r-1][1].length),t[r+1][1]=t[r-1][1]+t[r+1][1],t.splice(r-1,1),a=!0):t[r][1].substring(0,t[r+1][1].length)==t[r+1][1]&&(t[r-1][1]+=t[r+1][1],t[r][1]=t[r][1].substring(t[r+1][1].length)+t[r+1][1],t.splice(r+1,1),a=!0)),r++;a&&this.diff_cleanupMerge(t)},diff_match_patch.prototype.diff_xIndex=function(t,e){var r,s=0,n=0,i=0,o=0;for(r=0;r<t.length&&(t[r][0]!==DIFF_INSERT&&(s+=t[r][1].length),t[r][0]!==DIFF_DELETE&&(n+=t[r][1].length),!(s>e));r++)i=s,o=n;return t.length!=r&&t[r][0]===DIFF_DELETE?o:o+(e-i)},diff_match_patch.prototype.diff_prettyHtml=function(t){for(var e=[],r=0,s=0;s<t.length;s++){var n=t[s][0],i=t[s][1],o=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"&para;<BR>");switch(n){case DIFF_INSERT:e[s]='<INS STYLE="background:#E6FFE6;" TITLE="i='+r+'">'+o+"</INS>";break;case DIFF_DELETE:e[s]='<DEL STYLE="background:#FFE6E6;" TITLE="i='+r+'">'+o+"</DEL>";break;case DIFF_EQUAL:e[s]='<SPAN TITLE="i='+r+'">'+o+"</SPAN>"}n!==DIFF_DELETE&&(r+=i.length)}return e.join("")},diff_match_patch.prototype.diff_text1=function(t){for(var e=[],r=0;r<t.length;r++)t[r][0]!==DIFF_INSERT&&(e[r]=t[r][1]);return e.join("")},diff_match_patch.prototype.diff_text2=function(t){for(var e=[],r=0;r<t.length;r++)t[r][0]!==DIFF_DELETE&&(e[r]=t[r][1]);return e.join("")},diff_match_patch.prototype.diff_toDelta=function(t){for(var e=[],r=0;r<t.length;r++)switch(t[r][0]){case DIFF_INSERT:e[r]="+"+encodeURI(t[r][1]);break;case DIFF_DELETE:e[r]="-"+t[r][1].length;break;case DIFF_EQUAL:e[r]="="+t[r][1].length}return e.join("\t").replace(/\0/g,"%00").replace(/%20/g," ")},diff_match_patch.prototype.diff_fromDelta=function(t,e){var r=[],s=0,n=0;e=e.replace(/%00/g,"\0");for(var i=e.split(/\t/g),o=0;o<i.length;o++){var a=i[o].substring(1);switch(i[o].charAt(0)){case"+":try{r[s++]=[DIFF_INSERT,decodeURI(a)]}catch(d){throw new Error("Illegal escape in diff_fromDelta: "+a)}break;case"-":case"=":var h=parseInt(a,10);if(isNaN(h)||h<0)throw new Error("Invalid number in diff_fromDelta: "+a);var l=t.substring(n,n+=h);"="==i[o].charAt(0)?r[s++]=[DIFF_EQUAL,l]:r[s++]=[DIFF_DELETE,l];break;default:if(i[o])throw new Error("Invalid diff operation in diff_fromDelta: "+i[o])}}if(n!=t.length)throw new Error("Delta length ("+n+") does not equal source text length ("+t.length+").");return r},diff_match_patch.prototype.match_main=function(t,e,r){return r=Math.max(0,Math.min(r,t.length-e.length)),t==e?0:0===t.length?null:t.substring(r,r+e.length)==e?r:this.match_bitap(t,e,r)},diff_match_patch.prototype.match_bitap=function(t,e,r){function s(t,s){var n=Math.abs(r-s);return t/e.length/o.Match_Balance+n/i/(1-o.Match_Balance)}if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var n=this.match_alphabet(e),i=t.length;i=Math.max(i,this.Match_MinLength),i=Math.min(i,this.Match_MaxLength);var o=this,a=this.Match_Threshold,h=t.indexOf(e,r);h!=-1&&(a=Math.min(s(0,h),a)),(h=t.lastIndexOf(e,r+e.length))!=-1&&(a=Math.min(s(0,h),a));var l=1<<e.length-1;h=null;for(var d,c,g,f=Math.max(r+r,t.length),u=0;u<e.length;u++){var p=Array(t.length);for(d=r,c=f;d<c;)s(u,c)<a?d=c:f=c,c=Math.floor((f-d)/2+d);f=c;var _=Math.max(0,r-(c-r)-1),m=Math.min(t.length-1,e.length+c);t.charAt(m)==e.charAt(e.length-1)?p[m]=(1<<u+1)-1:p[m]=(1<<u)-1;for(var b=m-1;b>=_;b--)if(p[b]=0===u?(p[b+1]<<1|1)&n[t.charAt(b)]:(p[b+1]<<1|1)&n[t.charAt(b)]|g[b+1]<<1|1|g[b]<<1|1|g[b+1],p[b]&l){var y=s(u,b);if(y<=a){if(a=y,h=b,!(b>r))break;_=Math.max(0,r-(b-r))}}if(s(u+1,r)>a)break;g=p}return h},diff_match_patch.prototype.match_alphabet=function(t){for(var e={},r=0;r<t.length;r++)e[t.charAt(r)]=0;for(var r=0;r<t.length;r++)e[t.charAt(r)]|=1<<t.length-r-1;return e},diff_match_patch.prototype.patch_addContext=function(t,e){for(var r=e.substring(t.start2,t.start2+t.length1),s=0;e.indexOf(r)!=e.lastIndexOf(r)&&r.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)s+=this.Patch_Margin,r=e.substring(t.start2-s,t.start2+t.length1+s);s+=this.Patch_Margin;var n=e.substring(t.start2-s,t.start2);""!==n&&t.diffs.unshift([DIFF_EQUAL,n]);var i=e.substring(t.start2+t.length1,t.start2+t.length1+s);""!==i&&t.diffs.push([DIFF_EQUAL,i]),t.start1-=n.length,t.start2-=n.length,t.length1+=n.length+i.length,t.length2+=n.length+i.length},diff_match_patch.prototype.patch_make=function(t,e,r){var s,n,i;if(void 0===e?(i=t,s=this.diff_text1(i),n=""):(s=t,n=e,void 0!==r?i=r:(i=this.diff_main(s,n,!0),i.length>2&&(this.diff_cleanupSemantic(i),this.diff_cleanupEfficiency(i)))),0===i.length)return[];for(var o=[],a=new patch_obj,h=0,l=0,d=0,c=s,g=s,f=0;f<i.length;f++){var u=i[f][0],p=i[f][1];switch(h||u===DIFF_EQUAL||(a.start1=l,a.start2=d),u){case DIFF_INSERT:a.diffs[h++]=i[f],a.length2+=p.length,g=g.substring(0,d)+p+g.substring(d);break;case DIFF_DELETE:a.length1+=p.length,a.diffs[h++]=i[f],g=g.substring(0,d)+g.substring(d+p.length);break;case DIFF_EQUAL:p.length<=2*this.Patch_Margin&&h&&i.length!=f+1?(a.diffs[h++]=i[f],a.length1+=p.length,a.length2+=p.length):p.length>=2*this.Patch_Margin&&h&&(this.patch_addContext(a,c),o.push(a),a=new patch_obj,h=0,c=g)}u!==DIFF_INSERT&&(l+=p.length),u!==DIFF_DELETE&&(d+=p.length)}return h&&(this.patch_addContext(a,c),o.push(a)),o},diff_match_patch.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];for(var r=[],s=0;s<t.length;s++){var n=t[s],i=new patch_obj;i.diffs=n.diffs.slice(),i.start1=n.start1,i.start2=n.start2,i.length1=n.length1,i.length2=n.length2,r[s]=i}t=r;var o=this.patch_addPadding(t);e=o+e+o,this.patch_splitMax(t);for(var a=0,h=[],s=0;s<t.length;s++){var l=t[s].start2+a,d=this.diff_text1(t[s].diffs),c=this.match_main(e,d,l);if(null===c)h[s]=!1;else{h[s]=!0,a=c-l;var g=e.substring(c,c+d.length);if(d==g)e=e.substring(0,c)+this.diff_text2(t[s].diffs)+e.substring(c+d.length);else{var f=this.diff_main(d,g,!1);this.diff_cleanupSemanticLossless(f);for(var u,p=0,_=0;_<t[s].diffs.length;_++){var m=t[s].diffs[_];m[0]!==DIFF_EQUAL&&(u=this.diff_xIndex(f,p)),m[0]===DIFF_INSERT?e=e.substring(0,c+u)+m[1]+e.substring(c+u):m[0]===DIFF_DELETE&&(e=e.substring(0,c+u)+e.substring(c+this.diff_xIndex(f,p+m[1].length))),m[0]!==DIFF_DELETE&&(p+=m[1].length)}}}}return e=e.substring(o.length,e.length-o.length),[e,h]},diff_match_patch.prototype.patch_addPadding=function(t){for(var e="",r=0;r<this.Patch_Margin;r++)e+=String.fromCharCode(r);for(var r=0;r<t.length;r++)t[r].start1+=e.length,t[r].start2+=e.length;var s=t[0],n=s.diffs;if(0==n.length||n[0][0]!=DIFF_EQUAL)n.unshift([DIFF_EQUAL,e]),s.start1-=e.length,s.start2-=e.length,s.length1+=e.length,s.length2+=e.length;else if(e.length>n[0][1].length){var i=e.length-n[0][1].length;n[0][1]=e.substring(n[0][1].length)+n[0][1],s.start1-=i,s.start2-=i,s.length1+=i,s.length2+=i}if(s=t[t.length-1],n=s.diffs,0==n.length||n[n.length-1][0]!=DIFF_EQUAL)n.push([DIFF_EQUAL,e]),s.length1+=e.length,s.length2+=e.length;else if(e.length>n[n.length-1][1].length){var i=e.length-n[n.length-1][1].length;n[n.length-1][1]+=e.substring(0,i),s.length1+=i,s.length2+=i}return e},diff_match_patch.prototype.patch_splitMax=function(t){for(var e=0;e<t.length;e++)if(t[e].length1>this.Match_MaxBits){var r=t[e];t.splice(e,1);for(var s=this.Match_MaxBits,n=r.start1,i=r.start2,o="";0!==r.diffs.length;){var a=new patch_obj,h=!0;for(a.start1=n-o.length,a.start2=i-o.length,""!==o&&(a.length1=a.length2=o.length,a.diffs.push([DIFF_EQUAL,o]));0!==r.diffs.length&&a.length1<s-this.Patch_Margin;){var l=r.diffs[0][0],d=r.diffs[0][1];l===DIFF_INSERT?(a.length2+=d.length,i+=d.length,a.diffs.push(r.diffs.shift()),h=!1):(d=d.substring(0,s-a.length1-this.Patch_Margin),a.length1+=d.length,n+=d.length,l===DIFF_EQUAL?(a.length2+=d.length,i+=d.length):h=!1,a.diffs.push([l,d]),d==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(d.length))}o=this.diff_text2(a.diffs),o=o.substring(o.length-this.Patch_Margin);var c=this.diff_text1(r.diffs).substring(0,this.Patch_Margin);""!==c&&(a.length1+=c.length,a.length2+=c.length,0!==a.diffs.length&&a.diffs[a.diffs.length-1][0]===DIFF_EQUAL?a.diffs[a.diffs.length-1][1]+=c:a.diffs.push([DIFF_EQUAL,c])),h||t.splice(e++,0,a)}}},diff_match_patch.prototype.patch_toText=function(t){for(var e=[],r=0;r<t.length;r++)e[r]=t[r];return e.join("")},diff_match_patch.prototype.patch_fromText=function(t){var e=[];if(!t)return e;t=t.replace(/%00/g,"\0");for(var r=t.split("\n"),s=0;s<r.length;){var n=r[s].match(/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/);if(!n)throw new Error("Invalid patch string: "+r[s]);var i=new patch_obj;for(e.push(i),i.start1=parseInt(n[1],10),""===n[2]?(i.start1--,i.length1=1):"0"==n[2]?i.length1=0:(i.start1--,i.length1=parseInt(n[2],10)),i.start2=parseInt(n[3],10),""===n[4]?(i.start2--,i.length2=1):"0"==n[4]?i.length2=0:(i.start2--,i.length2=parseInt(n[4],10)),s++;s<r.length;){var o=r[s].charAt(0);try{var a=decodeURI(r[s].substring(1))}catch(h){throw new Error("Illegal escape in patch_fromText: "+a)}if("-"==o)i.diffs.push([DIFF_DELETE,a]);else if("+"==o)i.diffs.push([DIFF_INSERT,a]);else if(" "==o)i.diffs.push([DIFF_EQUAL,a]);else{if("@"==o)break;if(""!==o)throw new Error('Invalid patch mode "'+o+'" in: '+a)}s++}}return e},patch_obj.prototype.toString=function(){var t,e;t=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,e=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var r,s=["@@ -"+t+" +"+e+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case DIFF_INSERT:r="+";break;case DIFF_DELETE:r="-";break;case DIFF_EQUAL:r=" "}s[n+1]=r+encodeURI(this.diffs[n][1])+"\n"}return s.join("").replace(/\0/g,"%00").replace(/%20/g," ")},function(){window.DomPredictionHelper=function(){function t(){}return t.prototype.recursiveNodes=function(t){var e;return e=t.nodeName&&t.parentNode&&t!==document.body?this.recursiveNodes(t.parentNode):new Array,e.push(t),e},t.prototype.escapeCssNames=function(t){if(!t)return"";try{return t.replace(/\bselectorgadget_\w+\b/g,"").replace(/\\/g,"\\\\").replace(/[\#\;\&\,\.\+\*\~\'\:\"\!\^\$\[\]\(\)\=\>\|\/]/g,function(t){return"\\"+t}).replace(/\s+/,"")}catch(e){return window.console&&(console.log("---"),console.log("exception in escapeCssNames"),console.log(t),console.log("---")),""}},t.prototype.childElemNumber=function(t){var e;for(e=0;t.previousSibling&&(t=t.previousSibling);)1===t.nodeType&&e++;return e},t.prototype.siblingsWithoutTextNodes=function(t){var e,r,s,n,i;for(s=t.parentNode.childNodes,e=[],n=0,i=s.length;n<i;n++)if(r=s[n],"#"!==r.nodeName.substring(0,1)){if(r===t)break;e.push(r)}return e},t.prototype.pathOf=function(t){var e,r,s,n,i,o,a;for(s="",a=this.recursiveNodes(t),i=0,o=a.length;i<o;i++)if(e=a[i]){if(n=this.siblingsWithoutTextNodes(e),"body"!==e.nodeName.toLowerCase())for(r=n.length-2<0?0:n.length-2;r<n.length&&n[r]!==e;)n[r].nodeName.match(/^(script|#.*?)$/i)||(s+=this.cssDescriptor(n[r])+(r+1===n.length?"+ ":"~ ")),r++;s+=this.cssDescriptor(e)+" > "}return this.cleanCss(s)},t.prototype.cssDescriptor=function(t){var e,r,s,n,i,o;if(s=t.nodeName.toLowerCase(),r=t.id&&this.escapeCssNames(new String(t.id)),r&&r.length>0&&(s+="#"+r),t.className)for(o=t.className.split(" "),n=0,i=o.length;n<i;n++)e=o[n],r=this.escapeCssNames(e),e&&r.length>0&&(s+="."+r);return"body"!==t.nodeName.toLowerCase()&&(s+=":nth-child("+(this.childElemNumber(t)+1)+")"),s},t.prototype.cssDiff=function(t){var e,r,s,n,i,o,a,h,l,d,c;try{n=new diff_match_patch}catch(g){throw"Please include the diff_match_patch library."}if(void 0===t||0===t.length)return"";for(o={},i=this.encodeCssForDiff(t,o),e=i.pop(),h=0,d=i.length;h<d;h++)for(r=i[h],s=n.diff_main(e,r),e="",l=0,c=s.length;l<c;l++)a=s[l],0===a[0]&&(e+=a[1]);return this.decodeCss(e,o)},t.prototype.tokenizeCss=function(t){var e,r,s,n,i,o,a;for(r=!1,n="",s=[],a=this.cleanCss(t),i=0,o=a.length;i<o;i++)e=a[i],r?r=!1:"\\"===e?r=!0:"."!==e&&" "!==e&&"#"!==e&&">"!==e&&":"!==e&&","!==e&&"+"!==e&&"~"!==e||(n.length>0&&s.push(n),n=""),n+=e," "!==e&&","!==e||(s.push(n),n="");return n.length>0&&s.push(n),s},t.prototype.tokenizeCssForDiff=function(t){var e,r,s,n,i,o;for(r=[],e=[],o=this.tokenizeCss(t),n=0,i=o.length;n<i;n++)s=o[n],e.push(s)," "===s&&e.length>0?(r=r.concat(e),e=[]):"+"!==s&&"~"!==s||(e=[e.join("")]);return e.length>0?r.concat(e):r},t.prototype.decodeCss=function(t,e){var r,s,n,i,o,a;for(s=this.invertObject(e),n="",a=t.split(""),i=0,o=a.length;i<o;i++)r=a[i],n+=s[r];return this.cleanCss(n)},t.prototype.encodeCssForDiff=function(t,e){var r,s,n,i,o,a,h,l,d,c;for(r=50,i=[],a=0,l=t.length;a<l;a++){for(n=t[a],s=new String,c=this.tokenizeCssForDiff(n),h=0,d=c.length;h<d;h++)o=c[h],e[o]||(e[o]=String.fromCharCode(r++)),s+=e[o];i.push(s)}return i},t.prototype.tokenPriorities=function(t){var e,r,s,n,i,o,a,h;for(e=.001,n=new Array,s=0,a=0,h=t.length;a<h;a++)o=t[a],r=o.substring(0,1),i=o.substring(1,2),":"===r&&"n"===i?n[s]=0:">"===r?n[s]=2:"+"===r||"~"===r?n[s]=3:":"!==r&&"."!==r&&"#"!==r&&" "!==r&&">"!==r&&"+"!==r&&"~"!==r?n[s]=4:"."===r?n[s]=5:(r="#")?(n[s]=6,o.match(/\d{3,}/)&&(n[s]=2.5)):n[s]=0,n[s]+=s*e,s++;return n},t.prototype.orderFromPriorities=function(t){var e,r,s,n,i,o,a;for(s=new Array,r=new Array,e=n=0,o=t.length;0<=o?n<o:n>o;e=0<=o?++n:--n)s[e]={value:t[e],original:e};for(s.sort(function(t,e){return t.value-e.value}),e=i=0,a=t.length;0<=a?i<a:i>a;e=0<=a?++i:--i)r[e]=s[e].original;return r},t.prototype.simplifyCss=function(t,e,r){var s,n,i,o,a,h,l,d,c,g,f,u=this;for(l=this.tokenizeCss(t),d=this.tokenPriorities(l),a=this.orderFromPriorities(d),c=this.cleanCss(t),-1,s="",this.selectorGets("all",e,c)&&this.selectorGets("none",r,c)&&(s=c),i=!0;i;)for(i=!1,o=g=0,f=l.length;0<=f?g<f:g>f;o=0<=f?++g:--g)h=a[o],0!==l[h].length&&(n=l[h].substring(0,1),l[h].substring(1,2)," "!==n&&(this.wouldLeaveFreeFloatingNthChild(l,h)||this._removeElements(h,l,n,function(t){return!!(u.selectorGets("all",e,t)&&u.selectorGets("none",r,t)&&(t.length<s.length||0===s.length))&&(s=t,i=!0,!0)})));return this.cleanCss(s)},t.prototype._removeElements=function(t,e,r,s){var n,i,o,a,h,l;for(i="+"===r||"~"===r?this.positionOfSpaceBeforeIndexOrLineStart(t,e):t,a=e.slice(i,t+1),n=h=i;i<=t?h<=t:h>=t;n=i<=t?++h:--h)e[n]="";if(""===(o=this.cleanCss(e.join("")))||!s(o))for(n=l=i;i<=t?l<=t:l>=t;n=i<=t?++l:--l)e[n]=a[n-i];return e},t.prototype.positionOfSpaceBeforeIndexOrLineStart=function(t,e){var r;for(r=t;r>=0&&" "!==e[r];)r--;return r<0&&(r=0),r},t.prototype.wouldLeaveFreeFloatingNthChild=function(t,e){var r,s,n;for(n=s=!1,r=e+1;r<t.length&&0===t[r].length;)r++;for(r<t.length&&":n"===t[r].substring(0,2)&&(s=!0),r=e-1;r>-1&&0===t[r].length;)r--;return(r<0||" "===t[r])&&(n=!0),n&&s},t.prototype.cleanCss=function(t){var e,r;for(e=t,r=null;r!==e;)r=e,e=e.replace(/(^|\s+)(\+|\~)/,"").replace(/(\+|\~)\s*$/,"").replace(/>/g," > ").replace(/\s*(>\s*)+/g," > ").replace(/,/g," , ").replace(/\s+/g," ").replace(/^\s+|\s+$/g,"").replace(/\s*,$/g,"").replace(/^\s*,\s*/g,"").replace(/\s*>$/g,"").replace(/^>\s*/g,"").replace(/[\+\~\>]\s*,/g,",").replace(/[\+\~]\s*>/g,">").replace(/\s*(,\s*)+/g," , ");return e},t.prototype.getPathsFor=function(t){var e,r,s,n;for(r=[],s=0,n=t.length;s<n;s++)(e=t[s])&&e.nodeName&&r.push(this.pathOf(e));return r},t.prototype.predictCss=function(t,e){var r,s,n,i,o,a,h;if(0===t.length)return"";if(n=this.getPathsFor(t),r=this.cssDiff(n),i=this.simplifyCss(r,t,e),i.length>0)return i;for(o="",a=0,h=t.length;a<h;a++)s=t[a],o=this.pathOf(s)+", "+o;return o=this.cleanCss(o),this.simplifyCss(o,t,e)},t.prototype.selectorGets=function(t,e,r){if(0===e.length&&"all"===t)return!1;if(0===e.length&&"none"===t)return!0;try{return"all"===t?0===e.not(r).length:!e.is(r)}catch(s){throw window.console&&console.log("Error on selector: "+r),e}},t.prototype.invertObject=function(t){var e,r,s;r={};for(e in t)s=t[e],r[s]=e;return r},t.prototype.cssToXPath=function(t){var e,r,s,n,i,o;for(n=this.tokenizeCss(t),n[0]&&" "===n[0]&&n.splice(0,1),n[n.length-1]&&" "===n[n.length-1]&&n.splice(n.length-1,1),e=[],r="",i=0,o=n.length;i<o;i++)s=n[i]," "===s?(r+=this.cssToXPathBlockHelper(e),e=[]):e.push(s);return r+this.cssToXPathBlockHelper(e)},t.prototype.cssToXPathBlockHelper=function(t){var e,r,s,n,i,o,a,h,l,d,c;if(0===t.length)return"//";if(i="//",","===(s=t[0].substring(0,1)))return" | ";for(":"!==s&&"#"!==s&&"."!==s||(i+="*"),r=[],o=null,h=0,d=t.length;h<d;h++)e=t[h],s=e.substring(0,1),a=e.substring(1),":"===s?(o=a.match(/^nth-child\((\d+)\)$/))&&r.push("(((count(preceding-sibling::*) + 1) = "+o[1]+") and parent::*)"):"."===s?r.push('contains(concat( " ", @class, " " ), concat( " ", "'+a+'", " " ))'):"#"===s?r.push('(@id = "'+a+'")'):","===s||(i+=e);for(r.length>0&&(i+="["),n=l=0,c=r.length;0<=c?l<c:l>c;n=0<=c?++l:--l)i+=r[n],n<r.length-1&&(i+=" and ");return r.length>0&&(i+="]"),i},t}()}.call(this),function(){window.SelectorGadget=function(){function t(){}return t.prototype.border_width=5,t.prototype.border_padding=2,t.prototype.b_top=null,t.prototype.b_left=null,t.prototype.b_right=null,t.prototype.b_bottom=null,t.prototype.selected=[],t.prototype.rejected=[],t.prototype.special_mode=null,t.prototype.path_output_field=null,t.prototype.sg_div=null,t.prototype.ignore_class="selectorgadget_ignore",t.prototype.unbound=!1,t.prototype.prediction_helper=new DomPredictionHelper,t.prototype.restricted_elements=jQuerySG.map(["html","body","head","base"],function(t){return jQuerySG(t).get(0)}),t.prototype.makeBorders=function(t,e){var r,s,n,i,o,a,h;return this.removeBorders(),this.setupBorders(),o=t.parentNode?t.parentNode.tagName.toLowerCase()+" "+t.tagName.toLowerCase():t.tagName.toLowerCase(),r=jQuerySG(t),i=r.offset(),a=i.top,n=i.left,h=r.outerWidth(),s=r.outerHeight(),this.b_top.css("width",this.px(h+2*this.border_padding+2*this.border_width)).css("top",this.px(a-this.border_width-this.border_padding)).css("left",this.px(n-this.border_padding-this.border_width)),this.b_bottom.css("width",this.px(h+2*this.border_padding+2*this.border_width-5)).css("top",this.px(a+s+this.border_padding)).css("left",this.px(n-this.border_padding-this.border_width)).text(o),this.b_left.css("height",this.px(s+2*this.border_padding)).css("top",this.px(a-this.border_padding)).css("left",this.px(n-this.border_padding-this.border_width)),this.b_right.css("height",this.px(s+2*this.border_padding)).css("top",this.px(a-this.border_padding)).css("left",this.px(n+h+this.border_padding)),this.b_right.get(0).target_elem=this.b_left.get(0).target_elem=this.b_top.get(0).target_elem=this.b_bottom.get(0).target_elem=t,e||r.hasClass("selectorgadget_suggested")||r.hasClass("selectorgadget_selected")?(this.b_top.addClass("selectorgadget_border_red"),this.b_bottom.addClass("selectorgadget_border_red"),this.b_left.addClass("selectorgadget_border_red"),this.b_right.addClass("selectorgadget_border_red")):this.b_top.hasClass("selectorgadget_border_red")&&(this.b_top.removeClass("selectorgadget_border_red"),this.b_bottom.removeClass("selectorgadget_border_red"),this.b_left.removeClass("selectorgadget_border_red"),this.b_right.removeClass("selectorgadget_border_red")),this.showBorders()},t.prototype.px=function(t){return t+"px"},t.prototype.showBorders=function(){return this.b_top.show(),this.b_bottom.show(),this.b_left.show(),this.b_right.show()},t.prototype.removeBorders=function(){if(this.b_top)return this.b_top.hide(),this.b_bottom.hide(),this.b_left.hide(),this.b_right.hide()},t.prototype.setupBorders=function(){var t;if(!this.b_top)return t=this.border_width+"px",this.b_top=jQuerySG("<div>").addClass("selectorgadget_border").css("height",t).hide().bind("mousedown.sg",{self:this},this.sgMousedown),this.b_bottom=jQuerySG("<div>").addClass("selectorgadget_border").addClass("selectorgadget_bottom_border").css("height",this.px(this.border_width+6)).hide().bind("mousedown.sg",{self:this},this.sgMousedown),this.b_left=jQuerySG("<div>").addClass("selectorgadget_border").css("width",t).hide().bind("mousedown.sg",{self:this},this.sgMousedown),this.b_right=jQuerySG("<div>").addClass("selectorgadget_border").css("width",t).hide().bind("mousedown.sg",{self:this},this.sgMousedown),this.addBorderToDom()},t.prototype.addBorderToDom=function(){return document.body.appendChild(this.b_top.get(0)),document.body.appendChild(this.b_bottom.get(0)),document.body.appendChild(this.b_left.get(0)),document.body.appendChild(this.b_right.get(0))},t.prototype.removeBorderFromDom=function(){if(this.b_top)return this.b_top.remove(),this.b_bottom.remove(),this.b_left.remove(),this.b_right.remove(),this.b_top=this.b_bottom=this.b_left=this.b_right=null},t.prototype.selectable=function(t){return!this.css_restriction||this.css_restriction&&jQuerySG(t).is(this.css_restriction)},t.prototype.sgMouseover=function(t){var e,r,s;return e=t.data.self,!!e.unbound||this!==document.body&&this!==document.body.parentNode&&(s=jQuerySG(this),e.unhighlightIframes(),s.is("iframe")&&e.highlightIframe(s,t),"d"!==e.special_mode?(r=e.firstSelectedOrSuggestedParent(this),null!==r&&r!==this&&e.selectable(r)?e.makeBorders(r,!0):e.selectable(s)&&e.makeBorders(this)):jQuerySG(".selectorgadget_selected",this).get(0)||e.selectable(s)&&e.makeBorders(this),!1)},t.prototype.firstSelectedOrSuggestedParent=function(t){if(t,jQuerySG(t).hasClass("selectorgadget_suggested")||jQuerySG(t).hasClass("selectorgadget_selected"))return t;for(;t.parentNode&&(t=t.parentNode);)if(jQuerySG.inArray(t,this.restricted_elements)===-1&&(jQuerySG(t).hasClass("selectorgadget_suggested")||jQuerySG(t).hasClass("selectorgadget_selected")))return t;return null},t.prototype.sgMouseout=function(t){var e;return e=t.data.self,!!e.unbound||this!==document.body&&this!==document.body.parentNode&&(jQuerySG(this),e.removeBorders(),!1)},t.prototype.highlightIframe=function(t,e){var r,s,n,i,o,a;n=t.offset(),i=this,a=jQuerySG(e.target),r=jQuerySG("<div>").css("position","absolute").css("z-index","99998").css("width",this.px(t.outerWidth())).css("height",this.px(t.outerHeight())).css("top",this.px(n.top)).css("left",this.px(n.left)).css("background-color","#AAA").css("opacity","0.6").addClass("selectorgadget_iframe").addClass("selectorgadget_clean"),s=jQuerySG("<div><span>This is an iframe.  To select in it, </span></div>").addClass("selectorgadget_iframe_info").addClass("selectorgadget_iframe").addClass("selectorgadget_clean"),s.css({width:"200px",border:"1px solid #888"},{padding:"5px","background-color":"white",position:"absolute","z-index":"99999",top:this.px(n.top+t.outerHeight()/4),left:this.px(n.left+(t.outerWidth()-200)/2),height:"150px"}),o=null
;try{o=t.contents().get(0).location.href}catch(h){o=t.attr("src")}return s.append(jQuerySG("<a target='_top'>click here to open it</a>").attr("href",o)),s.append(jQuerySG("<span>, then relaunch SelectorGadget.</span>")),document.body.appendChild(s.get(0)),r.click(function(){if(i.selectable(a))return a.mousedown()}),document.body.appendChild(r.get(0))},t.prototype.unhighlightIframes=function(t,e){return jQuerySG(".selectorgadget_iframe").remove()},t.prototype.sgMousedown=function(t){var e,r,s,n,i;return r=t.data.self,!!r.unbound||(e=this,i=jQuerySG(e),i.hasClass("selectorgadget_border")&&(e=e.target_elem||e,i=jQuerySG(e)),e!==document.body&&e!==document.body.parentNode?("d"!==r.special_mode?null!==(s=r.firstSelectedOrSuggestedParent(e))&&s!==e&&(e=s,i=jQuerySG(e)):jQuerySG(".selectorgadget_selected",this).get(0)&&r.blockClicksOn(e),r.selectable(i)?(i.hasClass("selectorgadget_selected")?(i.removeClass("selectorgadget_selected"),r.selected.splice(jQuerySG.inArray(e,r.selected),1)):i.hasClass("selectorgadget_rejected")?(i.removeClass("selectorgadget_rejected"),r.rejected.splice(jQuerySG.inArray(e,r.rejected),1)):i.hasClass("selectorgadget_suggested")?(i.addClass("selectorgadget_rejected"),r.rejected.push(e)):(i.addClass("selectorgadget_selected"),r.selected.push(e)),r.clearSuggested(),n=r.prediction_helper.predictCss(jQuerySG(r.selected),jQuerySG(r.rejected.concat(r.restricted_elements))),r.suggestPredicted(n),r.setPath(n),r.removeBorders(),r.blockClicksOn(e),i.trigger("mouseover.sg",{self:r}),!1):(r.removeBorders(),r.blockClicksOn(e),!1)):void 0)},t.prototype.setupEventHandlers=function(){return jQuerySG("*:not(.selectorgadget_ignore)").bind("mouseover.sg",{self:this},this.sgMouseover),jQuerySG("*:not(.selectorgadget_ignore)").bind("mouseout.sg",{self:this},this.sgMouseout),jQuerySG("*:not(.selectorgadget_ignore)").bind("mousedown.sg",{self:this},this.sgMousedown),jQuerySG("html").bind("keydown.sg",{self:this},this.listenForActionKeys),jQuerySG("html").bind("keyup.sg",{self:this},this.clearActionKeys)},t.prototype.listenForActionKeys=function(t){var e;return e=t.data.self,!!e.unbound||(16===t.keyCode||68===t.keyCode?(e.special_mode="d",e.removeBorders()):void 0)},t.prototype.clearActionKeys=function(t){var e;return e=t.data.self,!!e.unbound||(e.removeBorders(),e.special_mode=null)},t.prototype.blockClicksOn=function(t){var e,r;return t=jQuerySG(t),r=t.offset(),e=jQuerySG("<div>").css("position","absolute").css("z-index","9999999").css("width",this.px(t.outerWidth())).css("height",this.px(t.outerHeight())).css("top",this.px(r.top)).css("left",this.px(r.left)).css("background-color",""),document.body.appendChild(e.get(0)),setTimeout(function(){return e.remove()},400),!1},t.prototype.setMode=function(t){return"browse"===t?this.removeEventHandlers():"interactive"===t&&this.setupEventHandlers(),this.clearSelected()},t.prototype.suggestPredicted=function(t){var e;if(t&&""!==t&&(e=0,jQuerySG(t).each(function(){if(e+=1,!jQuerySG(this).hasClass("selectorgadget_selected")&&!jQuerySG(this).hasClass("selectorgadget_ignore")&&!jQuerySG(this).hasClass("selectorgadget_rejected"))return jQuerySG(this).addClass("selectorgadget_suggested")}),this.clear_button))return e>0?this.clear_button.attr("value","Clear ("+e+")"):this.clear_button.attr("value","Clear")},t.prototype.setPath=function(t){return t&&t.length>0?this.path_output_field.value=t:this.path_output_field.value="No valid path found."},t.prototype.refreshFromPath=function(t){var e,r;return r=t&&t.data&&t.data.self||this,e=r.path_output_field.value,r.clearSelected(),r.suggestPredicted(e),r.setPath(e)},t.prototype.showXPath=function(t){var e,r;if(r=t&&t.data&&t.data.self||this,"No valid path found."!==(e=r.path_output_field.value))return prompt("The CSS selector '"+e+"' as an XPath is shown below.  Please report any bugs that you find with this converter.",r.prediction_helper.cssToXPath(e))},t.prototype.clearSelected=function(t){var e;return e=t&&t.data&&t.data.self||this,e.selected=[],e.rejected=[],jQuerySG(".selectorgadget_selected").removeClass("selectorgadget_selected"),jQuerySG(".selectorgadget_rejected").removeClass("selectorgadget_rejected"),e.removeBorders(),e.clearSuggested()},t.prototype.clearEverything=function(t){var e;return e=t&&t.data&&t.data.self||this,e.clearSelected(),e.resetOutputs()},t.prototype.resetOutputs=function(){return this.setPath()},t.prototype.clearSuggested=function(){if(jQuerySG(".selectorgadget_suggested").removeClass("selectorgadget_suggested"),this.clear_button)return this.clear_button.attr("value","Clear")},t.prototype.showHelp=function(){return alert("Click on a page element that you would like your selector to match (it will turn green). SelectorGadget will then generate a minimal CSS selector for that element, and will highlight (yellow) everything that is matched by the selector. Now click on a highlighted element to reject it (red), or click on an unhighlighted element to add it (green). Through this process of selection and rejection, SelectorGadget helps you to come up with the perfect CSS selector for your needs.\n\nHolding 'shift' while moving the mouse will let you select elements inside of other selected elements.")},t.prototype.useRemoteInterface=function(){return window.sg_options&&window.sg_options.remote_interface},t.prototype.updateRemoteInterface=function(t){return this.addScript(this.composeRemoteUrl(window.sg_options.remote_interface,t))},t.prototype.composeRemoteUrl=function(t,e){var r,s;if(s=t.split("?")[1]&&t.split("?")[1].split("&")||[],s.push("t="+(new Date).getTime()),s.push("url="+encodeURIComponent(window.location.href)),e)for(r in e)s.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));if(this.remote_data)for(r in this.remote_data)s.push(encodeURIComponent("data["+r+"]")+"="+encodeURIComponent(this.remote_data[r]));return t.split("?")[0]+"?"+s.join("&")},t.prototype.addScript=function(t){var e,r;return r=document.createElement("script"),r.setAttribute("type","text/javascript"),r.setAttribute("src",t),e=document.getElementsByTagName("head")[0],e?e.appendChild(r):document.body.appendChild(r)},t.prototype.makeInterface=function(){return this.sg_div=jQuerySG("<div>").attr("id","selectorgadget_main").addClass("selectorgadget_bottom").addClass("selectorgadget_ignore"),this.useRemoteInterface()?(this.path_output_field={value:null},this.remote_data={},this.updateRemoteInterface()):this.makeStandardInterface(),jQuerySG("body").append(this.sg_div)},t.prototype.makeStandardInterface=function(){var t,e;return e=this,t=jQuerySG("<input>").attr("id","selectorgadget_path_field").addClass("selectorgadget_ignore").addClass("selectorgadget_input_field").keydown(function(t){if(13===t.keyCode)return e.refreshFromPath(t)}).focus(function(){return jQuerySG(this).select()}),this.sg_div.append(t),this.clear_button=jQuerySG('<input type="button" value="Clear"/>').bind("click",{self:this},this.clearEverything).addClass("selectorgadget_ignore").addClass("selectorgadget_input_field"),this.sg_div.append(this.clear_button),this.sg_div.append(jQuerySG('<input type="button" value="Toggle Position"/>').click(function(){return e.sg_div.hasClass("selectorgadget_top")?e.sg_div.removeClass("selectorgadget_top").addClass("selectorgadget_bottom"):e.sg_div.removeClass("selectorgadget_bottom").addClass("selectorgadget_top")}).addClass("selectorgadget_ignore").addClass("selectorgadget_input_field")),this.sg_div.append(jQuerySG('<input type="button" value="XPath"/>').bind("click",{self:this},this.showXPath).addClass("selectorgadget_ignore").addClass("selectorgadget_input_field")),this.sg_div.append(jQuerySG('<input type="button" value="?"/>').bind("click",{self:this},this.showHelp).addClass("selectorgadget_ignore").addClass("selectorgadget_input_field")),this.sg_div.append(jQuerySG('<input type="button" value="X"/>').bind("click",{self:this},this.unbindAndRemoveInterface).addClass("selectorgadget_ignore").addClass("selectorgadget_input_field")),this.path_output_field=t.get(0)},t.prototype.removeInterface=function(t){return this.sg_div.remove(),this.sg_div=null},t.prototype.unbind=function(t){var e;return e=t&&t.data&&t.data.self||this,e.unbound=!0,e.removeBorderFromDom(),e.clearSelected()},t.prototype.unbindAndRemoveInterface=function(t){var e;return e=t&&t.data&&t.data.self||this,e.unbind(),e.removeInterface()},t.prototype.setOutputMode=function(t,e){var r;return r=t&&t.data&&t.data.self||this,r.output_mode=t&&t.data&&t.data.mode||e},t.prototype.rebind=function(){return this.unbound=!1,this.clearEverything(),this.setupBorders()},t.prototype.rebindAndMakeInterface=function(){return this.makeInterface(),this.rebind()},t.prototype.randBetween=function(t,e){return Math.floor(Math.random()*e)+t},t.toggle=function(e){return window.selector_gadget?window.selector_gadget.unbound?window.selector_gadget.rebindAndMakeInterface():window.selector_gadget.unbindAndRemoveInterface():(window.selector_gadget=new t,window.selector_gadget.makeInterface(),window.selector_gadget.clearEverything(),window.selector_gadget.setMode("interactive"),(null!=e?e.analytics:void 0)!==!1&&window.selector_gadget.analytics()),jQuerySG(".selector_gadget_loading").remove()},t.prototype.analytics=function(){var t,e,r,s,n,i,o,a,h,l;return o="UA-148948-9",a=encodeURIComponent("www.selectorgadget.com"),h=this.randBetween(1e9,9999999999),t=this.randBetween(1e7,99999999),e=this.randBetween(1e9,2147483647),s=Math.round((new Date).getTime()/1e3),r=encodeURIComponent(window.location.href),i="-",l="sg",n="http://www.google-analytics.com/__utm.gif?utmwv=1&utmn="+h+"&utmsr=-&utmsc=-&utmul=-&utmje=0&utmfl=-&utmdt=-&utmhn="+a+"&utmr="+r+"&utmp="+l+"&utmac="+o+"&utmcc=__utma%3D"+t+"."+e+"."+s+"."+s+"."+s+".2%3B%2B__utmb%3D"+t+"%3B%2B__utmc%3D"+t+"%3B%2B__utmz%3D"+t+"."+s+".2.2.utmccn%3D(direct)%7Cutmcsr%3D(direct)%7Cutmcmd%3D(none)%3B%2B__utmv%3D"+t+"."+i+"%3B",document.body.appendChild(jQuerySG("<img />").attr("src",n).get(0))},t}()}.call(this);
